<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>📖 Public Notebook</title>
  <style>
    body{margin:0;font-family:sans-serif;background:#0f172a;color:#f1f5f9;padding:20px}
    .app{max-width:900px;margin:auto}
    h1{margin:0 0 10px}
    #editor{min-height:120px;padding:12px;background:#1e293b;border-radius:8px;outline:none}
    .toolbar{margin:10px 0;display:flex;gap:8px;flex-wrap:wrap}
    .toolbar button{padding:6px 10px;border:none;border-radius:6px;background:#334155;color:#f1f5f9;cursor:pointer}
    .toolbar button:hover{background:#475569}
    #notes{margin-top:20px;display:flex;flex-direction:column;gap:14px}
    .note-block{background:#1e293b;padding:12px;border-radius:8px;border:1px solid #334155}
    .note-block h2{margin:0 0 6px;font-size:16px;color:#38bdf8}
    .note-block .time{font-size:12px;color:#94a3b8;margin-bottom:8px}
  </style>
</head>
<body>
<div class="app">
  <h1>📝 Public Notebook</h1>

  <input id="title" placeholder="Note title..." style="width:100%;padding:8px;border-radius:6px;margin-bottom:8px">

  <div id="editor" contenteditable="true" spellcheck="true">
    Yahan likho...
  </div>

  <div class="toolbar">
    <button onclick="exec('bold')"><b>B</b></button>
    <button onclick="exec('italic')"><i>I</i></button>
    <button onclick="exec('underline')"><u>U</u></button>
    <button onclick="exec('insertUnorderedList')">• List</button>
    <button onclick="exec('insertOrderedList')">1. List</button>
    <button onclick="saveNote()">💾 Save Note</button>
  </div>

  <h2>📚 All Public Notes</h2>
  <div id="notes"></div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js"></script>

<script type="module">
  // Tumhara Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDE8zApy4owfoFlgrbB80LSCEVxRWAvqcc",
    authDomain: "lalitapp-5cdf0.firebaseapp.com",
    databaseURL: "https://lalitapp-5cdf0-default-rtdb.firebaseio.com",
    projectId: "lalitapp-5cdf0",
    storageBucket: "lalitapp-5cdf0.firebasestorage.app",
    messagingSenderId: "296397903515",
    appId: "1:296397903515:web:efe85353eb8f548243d83e"
  };

  // Init Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const editor=document.getElementById('editor');
  const notes=document.getElementById('notes');
  const title=document.getElementById('title');

  function exec(cmd){document.execCommand(cmd,false,null);editor.focus();}

  // Save note to Firebase
  function saveNote(){
    const content=editor.innerHTML.trim();
    const head=title.value.trim() || "Untitled";
    if(!content){alert("Kuch likho pehle!");return;}
    const now=new Date().toLocaleString();
    const newRef=db.ref("notes").push();
    newRef.set({
      title: head,
      content: content,
      time: now
    });
    editor.innerHTML="";
    title.value="";
  }

  // Listen for notes
  db.ref("notes").on("value", snap=>{
    notes.innerHTML="";
    const data=snap.val();
    if(!data){notes.innerHTML="<p>No notes yet...</p>";return;}
    const arr=Object.values(data).reverse();
    arr.forEach(n=>{
      const block=document.createElement("div");
      block.className="note-block";
      block.innerHTML=`
        <h2>${n.title}</h2>
        <div class="time">${n.time}</div>
        <div class="content">${n.content}</div>
      `;
      notes.appendChild(block);
    });
  });
</script>
</body>
</html>
